<!doctype html>
<html>
<head> 
  <link rel="stylesheet" href="styles.css" type="text/css" />
  
  <link rel="stylesheet" href="node_modules/codemirror/lib/codemirror.css">
    <link rel="stylesheet" href="node_modules/codemirror/theme/zenburn.css">
  
  <script src="src/main.ts"></script>
  <script src="src/editor.ts"></script>
  
  <script src="node_modules/codemirror/lib/codemirror.js"></script>
    <script src="node_modules/codemirror/mode/dual/dual.js"></script>
    <script src="node_modules/codemirror/addon/selection/active-line.js"></script>
    <script src="node_modules/codemirror/addon/edit/matchbrackets.js"></script>
  
  <title>Dual programming language editor</title>
  
  <style>
      table, tr, td {
          padding: 0;
          margin: 0;
          border: none;
          border-spacing: 0;
          border-collapse: collapse;
      }
      .master-table {
          height: 100vh;
          width: 100vw;
          margin: auto;
      }
      .text-editor, .visual-editor {
          width: 42vw;
          height: 75%;
          overflow: auto;
      }
      .menu-bar a {
          margin-right: 1.5em;
          background-color: #222;
      }
      
      .console-bar {
          background-color: #222;
      }
      
      
      .CodeMirror {
          width: 42vw;
          height: 75vh;
          font-family: Consolas;
      }
  </style>
</head>
<body style="padding: 0; margin: 0; color: #ddd">
    <table class="master-table">
        <tr class="menu-bar">
            <td colspan="3">
                <div style="float: left"><a>File</a> <a>Edit</a> <a>View</a> <a>Goto</a> <a>Help</a></div>
                <div style="float: right">
                    Dual programming language editor
                    <span class="icon symbol-icon">D</span>
                </div>
            </td>
        </tr>
        <tr class="search-bar">
            <td colspan="3">
                <input type="text"
                    value=""
                    placeholder="Global Search: find anything, including commands and options"
                    style="width: 100vw; box-sizing: border-box; color: #ddd; background-color: #333; border: none" />
            </td>
        </tr>
        <tr class="edit-bar">
            <td rowspan="2" style="width: 16vw; background-color: #111">
                <div style="width: 15vw; white-space: normal;">
                    Visual scale:
                    <span onclick="document.querySelector('.root-table').style.fontSize = '0.25em';">[0.25em]</span>
                    <span onclick="document.querySelector('.root-table').style.fontSize = '0.5em';">[0.5em]</span>
                    <span onclick="document.querySelector('.root-table').style.fontSize = '0.75em';">[0.75em]</span>
                    <span onclick="document.querySelector('.root-table').style.fontSize = '1em';">[1em]</span>
                    <span onclick="document.querySelector('.root-table').style.fontSize = '1.25em';">[1.25em]</span>
                    <span onclick="document.querySelector('.root-table').style.fontSize = '1.5em';">[1.5em]</span>
                    <span onclick="document.querySelector('.root-table').style.fontSize = '1.75em';">[1.75em]</span>
                    <span onclick="document.querySelector('.root-table').style.fontSize = '2em';">[2em]</span>
                </div>
            </td>
            <td class="text-editor">
                <textarea id="console-input">
sequence[
    define[
        five
        number[5]
    ]
    define[
        some-variable
        conditional[
            >[five 3]
            number[3]
            number[4]
        ]
    ]
    $[Edit the source to update the visualisation -- it will be updated as you type.]
    $[hello world]
    $[note: the > operator is not implemented yet, so the condition is dummy]
    $[there are true and false values though, so you can make the condition false by replacing >[five 3] by false]
    some-variable
]
                </textarea>
            </td>
            <td class="visual-editor">
                <ul class="primitive-list" style="display: none">
                    <li style="background-color: #300">cancel</li>
                </ul>
                <div style="background-color: #333; overflow: auto; background: url(noise.png) #333; height: 75vh; width: 42vw">
                    <table class="root-table" style="font-size: 0.75em">
                        <tr><tr></tr></tr>
                        <tr class="root-row">
                             <td class="input-connection-cell" onclick="displayPrimitiveList(event)">
                                <div class="input-connection-div">
                                    <span class="input-connection-name">any</span>
                                    <span class="icon any-icon" style="border-right: 1px solid;">a</span>
                                    
                                    <span class="any-icon" style="top: 0; width: 0.33em; height: 28%; right: -0.33em; position: absolute; display: inline-block; z-index: 5; border-right: 1px solid; border-bottom: 1px solid; opacity: 0.66"></span>
                                    <span class="any-icon" style="bottom: 0; width: 0.33em; height: 28%; right: -0.33em; position: absolute; display: inline-block; z-index: 5; border-right: 1px solid; border-top: 1px solid; opacity: 0.66"></span>
                                </div>
                            </td>
                            <td class="output-connection-cell">
                                <div class="output-connection-div">
                                    <span class="any-icon" style="width: 0.33em; height: 30%; position: absolute; top: 29%; left: 0em; display: inline-block; z-index: 5; border: 1px solid; border-right: 0; opacity: 0.66"></span>
                                
                                    <span class="icon any-icon" style="margin-left: 0.33em; border-left: 1px solid;">a</span>
                                    <span class="output-connection-name">any</span>
                                </div>
                            </td>
                            <td class="root-cell" style="vertical-align: middle">
                                <table class="root-call-table">
                                    <tr><td><div style="margin-left: 1em">Click the root to start editing visually.</div></td></tr>
                                </table>
                            </td>
                        </tr>
                    </table>
                </div>
            </td>
        </tr>
        <tr class="console-bar">
            <td colspan="2">
                <pre id="console-output" style="width: 100%; height: 15vh; overflow: auto;"><!--
                    -->This is a simple console output. Open the browser's console for a more advanced console.
<!--
                --></pre>
            </td>
        </tr>
        <tr class="status-bar">
            
        </tr>
    </table>
    <!--
        <button onclick="execute_and_visualise();">Execute</button>
        <h3>Or supply own console mimicking devtools (attached to bottom)
            and make it disappear and redirect output to standard console
            if devtools are open [http://stackoverflow.com/questions/7798748/find-out-whether-chrome-console-is-open]</h3>

                <h3>Just a demo. No real interactivity for now. </h3>
                <h3>Use PostCSS to style this</h3>
-->  
</body>
</html>
